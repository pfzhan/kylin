<!--
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
-->

<script type="text/ng-template" id="schedulerSubmit.html">
    <div class="modal-header">
        <h4 tooltip="submit">{{dataKylin.monitor.schedulerCubeBuildConfirm}}</h4>
    </div>
    <div class="modal-body" style="background-color: white">
        <div ng-if="metaModel.model.partition_desc.partition_date_column" class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <div class="row">
                    <table class="table table-striped list">
                        <tbody>
                          <tr>
                              <td>{{dataKylin.monitor.jobsPartitionDateColumn}}</td>
                              <td>{{metaModel.model.partition_desc.partition_date_column}}</td>
                          </tr>
                          <tr>
                            <!--td>{{dataKylin.monitor.jobsStartDate}}</td>
                            <td>
                              <div class="dropdown" style="width: 98%;">
                                <a class="dropdown-toggle" id="dropdown1" role="button" data-toggle="dropdown" data-target="#" href="#">
                                  <div class="input-group"><input type="text" class="form-control" date-timepicker-timezone data-ng-model="scheduleRequest.startTime" >
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                  </div>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                  <datetimepicker  data-ng-model="scheduleRequest.startTime" data-datetimepicker-config="{ dropdownSelector: '#dropdown1' }"/>
                                </ul>
                              </div>
                            </td-->
                          </tr>
                          <tr>
                            <td>{{dataKylin.monitor.schedulerFirstTriggerTime}}</td>
                            <td>
                              <div class="dropdown" style="width: 98%;">
                                <a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown" data-target="#" href="#">
                                  <div class="input-group"><input type="text" class="form-control" date-timepicker-timezone data-ng-model="scheduleRequest.triggerTime" >
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                  </div>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                  <datetimepicker  data-ng-model="scheduleRequest.triggerTime" data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }"/>
                                </ul>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span class="input-icon input-icon-right" style="font-size:14px;">{{dataKylin.monitor.schedulerRepeatTimes}}
                                  <input type="text" placeholder="{{scheduleRequest.repeatCount}}" class="nav-search-input" ng-pattern="/^[0-9]*[1-9][0-9]*$/" ng-model="scheduleRequest.repeatCount" />
                              </span>
                            </td>
                            <td>
                              <span class="input-icon input-icon-right" style="font-size:14px;">{{dataKylin.monitor.schedulerRepeatInterval}}
                                <input type="text" placeholder="{{scheduleRequest.repeatInterval}}" class="nav-search-input" ng-pattern="/^[0-9]*[1-9][0-9]*$/" ng-model="scheduleRequest.repeatInterval" />
                                <select ng-required="state.intervalType" chosen ng-model="state.intervalType"
                                        ng-options="_type as _type for _type in dataKylin.monitor.schedulerIntervalOptions"
                                        style="width: 25%;" class="chosen-select">
                                  <option value=""></option>
                                </select>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <input type="checkbox" style="margin-left: 5px" ng-model="state.tillTriggerTime"  id="checkFor"><label for="checkFor" style="margin-left:10px;">{{dataKylin.monitor.schedulerTillTriggerTime}}</label>
                            </td>
                            <td>
                              {{dataKylin.monitor.schedulerPartitionInterval}}
                              <input type="text" placeholder="{{scheduleRequest.partitionInterval}}" class="nav-search-input" ng-pattern="/^[0-9]*[1-9][0-9]*$/" ng-model="scheduleRequest.partitionInterval" ng-disabled="state.tillTriggerTime"/>
                              <select ng-required="state.appendType" chosen ng-model="state.appendType"
                                      ng-options="_type as _type for _type in dataKylin.monitor.schedulerIntervalOptions"
                                      ng-disabled="state.tillTriggerTime"
                                      style="width: 25%;" class="chosen-select">
                                <option value=""></option>
                              </select>
                            </td>
                          </tr>
                          <!--tr>
                            <td>{{dataKylin.monitor.schedulerFirstEndTime}}</td>
                            <td>
                              <div class="dropdown" style="width: 98%;">
                                <a class="dropdown-toggle" id="dropdown3" role="button" data-toggle="dropdown" data-target="#" href="#">
                                  <div class="input-group"><input type="text" class="form-control" date-timepicker-timezone data-ng-model="scheduleRequest.firstEndTime" ng-disabled="state.tillTriggerTime">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                  </div>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                  <datetimepicker  data-ng-model="scheduleRequest.firstEndTime" data-datetimepicker-config="{ dropdownSelector: '#dropdown3' }"/>
                                </ul>
                              </div>
                            </td>
                          </tr-->
                        </tbody>
                    </table>
                </div>
                <div ng-if="message">
                    <span class="text-warning">{{message}}</span>
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
    <div class="modal-footer">

        <button class="btn btn-default" ng-click="cancel()">{{dataKylin.monitor.jobsModalClose}}</button>
      <button class="btn btn-success" ng-click="schedule()" ng-disabled="scheduleRequest.triggerTime<=0">{{dataKylin.insight.ac_submit}}</button>
    </div>
</script>
