groups:
- name: build_status_alert
  rules:

  - alert: Cube Build Failed Too Many Times
    expr: round(sum by (job,instance) (delta(ke_model_build_minutes_count{succeed="false"}[10m]))) > 3
    for: 1m
    labels:
      severity: signification
    annotations:
      summary: "{{$labels.job}} Instance {{$labels.instance}} cube build failed too many times"
      description: "{{$labels.job}} Instance {{$labels.instance}} cube build failed times has been > 3 in last 10 minutes, current failed times: {{ $value }}"